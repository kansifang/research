<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
</head>

<body>

<canvas id="ctx" style="width:256px; height:256px; border:#666666 solid 1px;"></canvas>


<script language="javascript">
//绘制像素
function drawPixels(/*上下文*/ctx, /*数据*/px) {
	// 创建空白ImageData对象
	var imgd = ctx.createImageData(ctx.canvas.width, ctx.canvas.height);
	var pix = imgd.data;
	var slen = px.length;//387
	var c = 0;
	var r, g, b, k, i;
	r = g = b = 0;
	for (i = 1; i < slen; i++) {
		if (px[i] < 0) {
			k = px[i];
			if (px[i + 1] == 0) {
				i++;
				r = px[++i];
				g = px[++i];
				b = px[++i]
			}
			while (k++) {
				pix[c * 4] = r;
				pix[c * 4 + 1] = g;
				pix[c * 4 + 2] = b;
				pix[c * 4 + 3] = 255;
				c++
			}
		} else {
			c += px[i]
		}
	}
	ctx.putImageData(imgd, 0, 0)
}

var data = [0, 16345, -1, 0, 235, 51, 255, 506, -3, 18891, -1, 1024, -1, 254, -2, 4046, -1, 256, -2, 124, -1, 0, 204, 48, 0, 652, -1, 0, 255, 242, 0, 1277, -1, 0, 235, 51, 255, 502, -3, 0, 204, 48, 0, 253, -1, 41, -1, 0, 235, 51, 255, 255, -1, 335, -1, 254, -1, 255, -1, 180, -1, 69, -1, 185, -1, 7, -2, 246, -2, 1, -2, 3, -1, 2, -1, 244, -1, 4, -3, 8, -1, 56, -1, 7, -1, 0, 204, 48, 0, 1, -1, 172, -3, 0, 235, 51, 255, 1, -2, 65, -1, 4, -1, 0, 255, 242, 0, 4, -1, 0, 235, 51, 255, 3, -1, 253, -2, 0, 255, 242, 0, 222, -1, 0, 235, 51, 255, 28, -2, 0, 255, 242, 0, 1, -1, 0, 235, 51, 255, 1, -1, 248, -1, 0, 255, 242, 0, 1, -1, 0, 235, 51, 255, 10, -1, 165, -1, 77, -1, 0, 255, 242, 0, 2, -4, 0, 235, 51, 255, 1, -1, 252, -3, 0, 255, 242, 0, 6, -1, 0, 235, 51, 255, 231, -1, 12, -4, 6, -1, 1, -1, 163, -3, 1, -2, 68, -1, 6, -1, 2, -1, 7, -1, 165, -4, 67, -1, 15, -1, 166, -1, 1, -2, 1, -1, 1, -1, 69, -1, 9, -1, 168, -5, 250, -6, 252, -2, 1, -1, 1, -1, 1, -2, 67, -2, 9, -2, 170, -1, 1, -4, 256, -1, 52, -3, 264, -1, 257, -1, 192, -1, 60, -1, 257, -1, 194, -1, 34, -1, 475, -2, 46, -1, 210, -1, 0, 204, 48, 0, 44, -1, 0, 235, 51, 255, 25, -1, 184, -1, 0, 204, 48, 0, 256, -1, 0, 235, 51, 255, 255, -1, 255, -2, 254, -1, 511, -1, 0, 204, 48, 0, 512, -1, 0, 255, 242, 0, 2, -1, 252, -1, 2, -1, 255, -1, 516, -1, 0, 235, 51, 255, 255, -1, 5, -1, 0, 255, 242, 0, 50, -1, 0, 235, 51, 255, 200, -1, 53, -2, 1, -1, 253, -1, 203, -1, 51, -1, 254, -1, 8, -1, 199, -1, 563, -3, 1, -1, 245, -1, 0, 255, 242, 0, 7, -1, 0, 235, 51, 255, 234, -1, 1, -2, 13, -1, 1, -1, 208, -1, 42, -1, 1, -1, 227, -1, 24, -1];

var ctx = document.getElementById("ctx").getContext("2d");
console.log(ctx);
drawPixels(ctx, data);
</script>
</body>
</html>
